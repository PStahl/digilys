= semantic_form_for suite, html: { class: "form-horizontal" } do |f|

  = f.inputs do

    = f.hidden_field :template_id
    = f.hidden_field :is_template

    = f.input :name, required: true, input_html: { required: true, autofocus: true }

    - if suite.new_record? && suite.template && !suite.is_template?
      .control-group
        .controls
          = f.action :submit, label: t(:".save_action"), button_html: { class: "btn btn-primary"}
          %a.btn{href:suite.new_record? ? suites_path() : url_for(suite)}= t(:".cancel_action")

  - if suite.new_record? && !suite.is_template?
    - if suite.template
      = f.inputs Evaluation.model_name.human(count: 2) do
        = f.inputs for: :evaluations do |ef|
          = ef.hidden_field :template_id
          = ef.hidden_field :type
          = ef.hidden_field :max_result
          = ef.hidden_field :red_below
          = ef.hidden_field :green_above
          = ef.hidden_field :stanine1
          = ef.hidden_field :stanine2
          = ef.hidden_field :stanine3
          = ef.hidden_field :stanine4
          = ef.hidden_field :stanine5
          = ef.hidden_field :stanine6
          = ef.hidden_field :stanine7
          = ef.hidden_field :stanine8

          = ef.input :name,                              input_html: { readonly: true }
          = ef.input :date, as: :string, required: true, input_html: { required: true, class: "datepicker" }

      = f.inputs Meeting.model_name.human(count: 2) do 
        = f.inputs for: :meetings do |mf|
          = mf.input :name,                              input_html: { readonly: true }
          = mf.input :date, as: :string, required: true, input_html: { required: true, class: "datepicker" }

    = f.inputs Participant.model_name.human(count: 2), for: :participants, id: "new_participant" do |pf|
      = pf.input :student_id,
        as: :hidden,
        input_html: { class: "student-autocomplete-field",
          data: { url: search_students_path(format: :json),
            multiple: true,
            placeholder: t(:".student_placeholder") } }

      = pf.input :group_id,
        as: :hidden,
        input_html: { class: "group-autocomplete-field",
          data: { url: search_groups_path(format: :json),
            placeholder: t(:".group_placeholder"),
            multiple: true } }


  = f.actions do
    = f.action :submit, label: t(:".save_action"), button_html: { class: "btn btn-primary"}
    %a.btn{href:suite.new_record? ? suites_path() : url_for(suite)}= t(:".cancel_action")
