%h1
  = @color_table.name
  %small= ColorTable.model_name.human

= render partial: "navigation", locals: { color_table: @color_table, active: :show }

- evaluations = @color_table.generic_evaluations + @color_table.suite_evaluations

:javascript
  window.Digilys = window.Digilys || {}
  window.Digilys.colorTable = window.Digilys.colorTable || {}

  ;(function(exports) {

    var columns, data

    columns = [#{color_table_columns(@color_table.student_data, evaluations)}]
    data = [#{result_rows(@color_table.students.order(current_name_order), @color_table.student_data, evaluations).join(",")}]

    for (var i = 0; i < columns.length; i++) {
      columns[i].sortable = true;
      columns[i].minWidth = i == 0 ? 220 : 80;
    }

    exports["columns"] = columns
    exports["data"] = data
  })(window.Digilys.colorTable)

#color-table(style="width: 100%;")

/= render partial: "color_table", locals: { color_table: @color_table, user_settings: @user_settings, can_change: true }

